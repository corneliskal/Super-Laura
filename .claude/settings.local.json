{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(git init:*)",
      "Bash(git -C \"C:\\\\Users\\\\kalma497\\\\Desktop\\\\Super-Laura\" log --oneline -5)",
      "Bash(npm create:*)",
      "Bash(npx --yes create-vite@latest tmp-init -- --template react-ts)",
      "Bash(npm install:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run build:*)",
      "Bash(npm uninstall:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npx firebase deploy:*)",
      "Bash(curl:*)",
      "Bash(gcloud functions add-iam-policy-binding:*)",
      "Bash(where:*)",
      "Bash(npx google-auth-library:*)",
      "Bash(npx firebase functions:list:*)",
      "Bash(npx firebase-tools@latest functions:secrets:access:*)",
      "Bash(npx google-cloud-cli:*)",
      "Bash(node -e \"\nconst { execSync } = require\\(''child_process''\\);\n// Get the access token from firebase\nconst token = execSync\\(''npx firebase-tools@latest login:ci --no-localhost 2>&1''\\).toString\\(\\);\nconsole.log\\(token.substring\\(0, 200\\)\\);\n\")",
      "Bash(node -e \"\nconst path = require\\(''path''\\);\nconst os = require\\(''os''\\);\nconst fs = require\\(''fs''\\);\n// Firebase stores tokens in configstore\nconst configPath = path.join\\(os.homedir\\(\\), ''.config'', ''configstore'', ''firebase-tools.json''\\);\nif \\(fs.existsSync\\(configPath\\)\\) {\n  const config = JSON.parse\\(fs.readFileSync\\(configPath, ''utf8''\\)\\);\n  const token = config.tokens?.refresh_token;\n  if \\(token\\) console.log\\(''Has refresh token: yes''\\);\n  else console.log\\(''No refresh token found''\\);\n  console.log\\(''Keys:'', Object.keys\\(config\\)\\);\n} else {\n  console.log\\(''Config not found at'', configPath\\);\n}\n\")",
      "Bash(node -e \"\nconst path = require\\(''path''\\);\nconst os = require\\(''os''\\);\nconst fs = require\\(''fs''\\);\nconst https = require\\(''https''\\);\n\nconst configPath = path.join\\(os.homedir\\(\\), ''.config'', ''configstore'', ''firebase-tools.json''\\);\nconst config = JSON.parse\\(fs.readFileSync\\(configPath, ''utf8''\\)\\);\nconst refreshToken = config.tokens.refresh_token;\n\n// Exchange refresh token for access token\nconst data = new URLSearchParams\\({\n  grant_type: ''refresh_token'',\n  refresh_token: refreshToken,\n  client_id: ''563584335869-fgrhgmd47bqnekij5i8b5pr03ho849e6.apps.googleusercontent.com'',\n  client_secret: ''j9iVZfS8kkCEFUPaAeJV0sAi'',\n}\\);\n\nconst options = {\n  hostname: ''oauth2.googleapis.com'',\n  path: ''/token'',\n  method: ''POST'',\n  headers: { ''Content-Type'': ''application/x-www-form-urlencoded'' }\n};\n\nconst req = https.request\\(options, \\(res\\) => {\n  let body = '''';\n  res.on\\(''data'', chunk => body += chunk\\);\n  res.on\\(''end'', \\(\\) => {\n    const result = JSON.parse\\(body\\);\n    if \\(result.access_token\\) {\n      // Now set IAM policy for submitReceipts\n      const projectId = ''super-laura-fb40a'';\n      const region = ''europe-west1'';\n      \n      [''submitReceipts'', ''submitTravel''].forEach\\(fnName => {\n        const policyData = JSON.stringify\\({\n          policy: {\n            bindings: [{\n              role: ''roles/cloudfunctions.invoker'',\n              members: [''allUsers'']\n            }]\n          }\n        }\\);\n        \n        const iamOptions = {\n          hostname: ''cloudfunctions.googleapis.com'',\n          path: ''/v1/projects/'' + projectId + ''/locations/'' + region + ''/functions/'' + fnName + '':setIamPolicy'',\n          method: ''POST'',\n          headers: {\n            ''Authorization'': ''Bearer '' + result.access_token,\n            ''Content-Type'': ''application/json'',\n            ''Content-Length'': Buffer.byteLength\\(policyData\\)\n          }\n        };\n        \n        const iamReq = https.request\\(iamOptions, \\(iamRes\\) => {\n          let iamBody = '''';\n          iamRes.on\\(''data'', chunk => iamBody += chunk\\);\n          iamRes.on\\(''end'', \\(\\) => {\n            console.log\\(fnName + '':'', iamRes.statusCode, iamBody.substring\\(0, 200\\)\\);\n          }\\);\n        }\\);\n        iamReq.write\\(policyData\\);\n        iamReq.end\\(\\);\n      }\\);\n    } else {\n      console.log\\(''Token error:'', body\\);\n    }\n  }\\);\n}\\);\nreq.write\\(data.toString\\(\\)\\);\nreq.end\\(\\);\n\")"
    ]
  }
}
